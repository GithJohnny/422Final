<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>2ee87b10d5ff40eabb0c4a10a23cccd2</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="cell raw">

</div>
<div class="cell code" data-execution_count="182">
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.dates <span class="im">import</span> drange</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tqdm <span class="im">import</span> tqdm</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> patsy <span class="im">import</span> dmatrices</span></code></pre></div>
</div>
<div class="cell raw">

</div>
<section id="introduction" class="cell markdown">
<h1>Introduction</h1>
</section>
<div class="cell markdown">
<p>Many people play video games, but there is a growing community of people who enjoy an extra challenge: finishing the game as fast as possible. For practically every game, there is a speedrunning scene. In the early days of speedrunning, the practice was incredibly niche and splintered on various websites. But over the past 2 decades Speedrunning.com has become the biggest congregation of speedrunning content on the internet. The top players of my speedrunning scene, Minecraft: Java Edition, have noted how the number of players/runs during quarantine has exploded, to the point where moderation became backlogged. So I wanted to download data from the website and see if this quarantine effect was real, and if so was it the only variable involved?</p>
</div>
<section id="collecting-the-data" class="cell markdown">
<h1>Collecting the data</h1>
</section>
<div class="cell markdown">
<p>Thankfully, Speedrun.com provides a rest API for us to pull information about games, leaderboards, and even individual runs. The API requires a header that briefly describes the use, which we do here:</p>
</div>
<div class="cell code" data-execution_count="2">
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>init_headers <span class="op">=</span> {<span class="st">&#39;User-Agent&#39;</span>: <span class="st">&#39;uni-project-bot/1.0&#39;</span>}</span></code></pre></div>
</div>
<div class="cell markdown">
<p>Now we can pull every game that is on Speedrun.com. We can request the IDs of games, which are used to uniquely identify them, and are useful for gaining more important information later.</p>
</div>
<div class="cell code" data-execution_count="3">
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>game_IDs <span class="op">=</span> []</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>offset <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Request every game in batches of 1000</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span>(<span class="va">True</span>):</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Request and unpack 1000 games</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    URL <span class="op">=</span> <span class="st">&#39;https://www.speedrun.com/api/v1/games?_bulk=yes&amp;max=1000&amp;offset=&#39;</span> <span class="op">+</span> <span class="bu">str</span>(offset)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(URL, init_headers)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> response.json()[<span class="st">&#39;data&#39;</span>]</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add each game to array</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> game <span class="kw">in</span> data:</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        game_IDs.append(game[<span class="st">&#39;id&#39;</span>])</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    offset <span class="op">+=</span> <span class="dv">1000</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If length is less than max, we break</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(data) <span class="op">&lt;</span> <span class="dv">1000</span>:</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(game_IDs))</span></code></pre></div>
<div class="output stream stdout">
<pre><code>28755
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>We see that in all, there are over 28 thousand games on Speedrun.com! With the IDs we can now pull and store all the data we need. Here is the dataframe we will use, and we collect data in the following categories:</p>
<ul>
<li><p>Game: This is the international name of the game</p></li>
<li><p>Category: The category of the speedrun, which defines the leaderboard. A game can have multiple types of speedruns, such as beating the full game vs. a signle level, and the category differentiates these types. It can be split into further subcategories with the values.</p></li>
<li><p>Run Time: The length of the speedrun, defined as whatever time is used for rankings on the leaderboard</p></li>
<li><p>Date: The date the speedrun was submitted (not always present)</p></li>
<li><p>Values: Set of aspects of a run that can put it in a subcategory, such as using glitches vs. glitchless. Only present if it creates a subcategory</p></li>
<li><p>Game ID, Cat ID: Unique identifiers the API uses for finding games and categories</p></li>
</ul>
<p>Note that the API returns runs that are current to the date of data collection, so future runs of data collection may look different as it will include runs which did not exist at the time I collected.</p>
</div>
<div class="cell code" data-execution_count="4">
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(columns <span class="op">=</span> [<span class="st">&#39;Game&#39;</span>,<span class="st">&#39;Category&#39;</span>,<span class="st">&#39;Run Time&#39;</span>,<span class="st">&#39;Date&#39;</span>,<span class="st">&#39;Values&#39;</span>, <span class="st">&#39;Game ID&#39;</span>, <span class="st">&#39;Cat ID&#39;</span>])</span></code></pre></div>
</div>
<div class="cell markdown">
<p>Finally, we use our game IDs to collect the data! For each game, we collect every <em>verified</em> run that was ever submitted to a leaderboard. This means no runs that were rejected. This also means we are essentially collecting the entire speedrun history of a game.</p>
</div>
<div class="cell code" data-execution_count="5">
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#game_IDs = [&#39;j1npme6p&#39;]</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> os.getcwd()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>path <span class="op">+=</span> <span class="st">&#39;/FinalData(2)&#39;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># If data is already in directory, load that</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> os.path.isfile(path):</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(<span class="st">&#39;FinalData(2)&#39;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    df.drop(<span class="st">&#39;Unnamed: 0&#39;</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Else, collect the data</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    maxim <span class="op">=</span> <span class="dv">200</span> <span class="co"># Max number of runs we pull at a time, 200 is maximum allowed</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    sec <span class="op">=</span> <span class="dv">15</span> <span class="co"># Cooldown time for when </span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    track <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extracts all runs for each game, stores them in df</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Currently accounting for crash!!! Starting from where it crashed</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> game_ID <span class="kw">in</span> tqdm(game_IDs):</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Every 100 games save the dataframe to disk</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>        track <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> track <span class="op">%</span> <span class="dv">500</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>            cwd <span class="op">=</span> os.getcwd()</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            path <span class="op">=</span> cwd <span class="op">+</span> <span class="st">&quot;/DataV&quot;</span> <span class="op">+</span> <span class="bu">str</span>(track<span class="op">/</span><span class="dv">500</span>)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>            df.to_csv(path)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        same <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Get info about game, categories, and variables</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>        URL <span class="op">=</span> <span class="st">&#39;https://www.speedrun.com/api/v1/games/&#39;</span> <span class="op">+</span> <span class="bu">str</span>(game_ID) <span class="op">+</span> <span class="st">&#39;?embed=categories.variables&#39;</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.get(URL,init_headers)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> response.json() <span class="co"># This has failed exactly once for reasons unknown</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> data[<span class="st">&#39;data&#39;</span>]</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Occurs if we get a throttling error. We wait 15 seconds then try again.</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">&#39;status&#39;</span> <span class="kw">in</span> data <span class="kw">and</span> data[<span class="st">&#39;status&#39;</span>] <span class="op">==</span> <span class="dv">420</span>:</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>                <span class="cf">while</span> <span class="st">&#39;status&#39;</span> <span class="kw">in</span> data <span class="kw">and</span> data[<span class="st">&#39;status&#39;</span>] <span class="op">==</span> <span class="dv">420</span>:</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>                    time.sleep(sec)</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>                    response <span class="op">=</span> requests.get(URL,init_headers)</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>                    data <span class="op">=</span> response.json()</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>                data <span class="op">=</span> data[<span class="st">&#39;data&#39;</span>]</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>                <span class="co"># If other error, print and move on</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>                <span class="co"># The only error in my case was a game not being found, presumably being deleted between pulling the game and pulling the runs</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="st">&#39;1b&#39;</span>)</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(data)</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>        game <span class="op">=</span> data[<span class="st">&#39;names&#39;</span>][<span class="st">&#39;international&#39;</span>]</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>        cats <span class="op">=</span> data[<span class="st">&#39;categories&#39;</span>][<span class="st">&#39;data&#39;</span>]</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Finds all the runs for each category</span></span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> categ <span class="kw">in</span> cats:</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>            cat <span class="op">=</span> categ[<span class="st">&#39;id&#39;</span>] <span class="co"># Category ID</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>            cat_name <span class="op">=</span> categ[<span class="st">&#39;name&#39;</span>] <span class="co"># Category Name</span></span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>            offset <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>            <span class="bu">dir</span> <span class="op">=</span> <span class="st">&#39;asc&#39;</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>            fin <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>            sub_categories <span class="op">=</span> [] <span class="co"># Collection of the variables that define subcategories</span></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>            all_vars <span class="op">=</span> categ[<span class="st">&#39;variables&#39;</span>][<span class="st">&#39;data&#39;</span>] <span class="co"># Collects all variables of a run</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> var <span class="kw">in</span> all_vars:</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> var[<span class="st">&#39;is-subcategory&#39;</span>]:</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>                    sub_categories.append(var[<span class="st">&#39;values&#39;</span>][<span class="st">&#39;values&#39;</span>])</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>            sub_keys <span class="op">=</span> {}</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> s <span class="kw">in</span> sub_categories:</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Assumed no two sub-categories in the same category will have the same variable ID</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>                temp_dict <span class="op">=</span> <span class="bu">dict</span>(s)</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> t <span class="kw">in</span> temp_dict.keys():</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>                    temp_dict[t] <span class="op">=</span> temp_dict[t][<span class="st">&#39;label&#39;</span>]</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>                sub_keys.update(temp_dict)</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Collect data on every run. </span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span>(<span class="va">True</span>):</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Asks API for verified runs from this category, ordered by date submitted</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>                URL <span class="op">=</span> <span class="st">&#39;https://www.speedrun.com/api/v1/runs?game=&#39;</span> <span class="op">+</span> <span class="bu">str</span>(game_ID) <span class="op">+</span> <span class="st">&#39;&amp;category=&#39;</span> <span class="op">+</span> <span class="bu">str</span>(cat) <span class="op">+</span> <span class="st">&#39;&amp;orderby=submitted&amp;direction=&#39;</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">dir</span>) <span class="op">+</span> <span class="st">&#39;&amp;status=verified&amp;max=&#39;</span> <span class="op">+</span> <span class="bu">str</span>(maxim) <span class="op">+</span> <span class="st">&#39;&amp;offset=&#39;</span> <span class="op">+</span> <span class="bu">str</span>(offset)</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>                response <span class="op">=</span> requests.get(URL,init_headers)</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>                data2 <span class="op">=</span> response.json()</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>                <span class="cf">try</span>:</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>                    data2 <span class="op">=</span> data2[<span class="st">&#39;data&#39;</span>]</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>                <span class="cf">except</span>:</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># Throttling error. Wait 15 seconds and try again.</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> <span class="st">&#39;status&#39;</span> <span class="kw">in</span> data2 <span class="kw">and</span> data2[<span class="st">&#39;status&#39;</span>] <span class="op">==</span> <span class="dv">420</span>:</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">while</span> <span class="st">&#39;status&#39;</span> <span class="kw">in</span> data2 <span class="kw">and</span> data2[<span class="st">&#39;status&#39;</span>] <span class="op">==</span> <span class="dv">420</span>:</span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>                            time.sleep(sec)</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>                            response <span class="op">=</span> requests.get(URL,init_headers)</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>                            data2 <span class="op">=</span> response.json()</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>                        data2 <span class="op">=</span> data2[<span class="st">&#39;data&#39;</span>]</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">elif</span> <span class="st">&#39;times&#39;</span> <span class="kw">in</span> data2:</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>                        data2 <span class="op">=</span> data2</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">else</span>:</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># If other error, print and move on</span></span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a>                        <span class="bu">print</span>(<span class="dv">2</span>)</span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>                        <span class="bu">print</span>(data2)</span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">continue</span></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> run <span class="kw">in</span> data2:</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># Add game, category, time, date, and options</span></span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>                    sub_cat <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># We store the label of the subcategory for ease of reading</span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">for</span> var <span class="kw">in</span> run[<span class="st">&#39;values&#39;</span>].values():</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">if</span> var <span class="kw">in</span> sub_keys:</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>                            sub_cat.add(sub_keys[var])</span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>                    df.loc[<span class="bu">len</span>(df.index)] <span class="op">=</span> [game, cat_name, run[<span class="st">&#39;times&#39;</span>][<span class="st">&#39;primary_t&#39;</span>], run[<span class="st">&#39;date&#39;</span>], sub_cat, game_ID, cat]</span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>                <span class="co"># If length of collected data is smaller than maximum we can collect, we&#39;re at the end of the list and break</span></span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="bu">len</span>(data2) <span class="op">&lt;</span> maxim:</span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">break</span></span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Need to work from the back of the list if the offset is more than 10k (known bug)</span></span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> offset <span class="op">+</span> maxim <span class="op">&gt;=</span> <span class="dv">10000</span>:</span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>                    fin <span class="op">=</span> data2[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">dir</span> <span class="op">=</span> <span class="st">&#39;desc&#39;</span></span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>                    offset <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">continue</span></span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a>                <span class="co"># If we&#39;re working backwords and find the run we ended on going forward, we&#39;ve found all runs and break</span></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="bu">dir</span> <span class="op">==</span> <span class="st">&#39;desc&#39;</span> <span class="kw">and</span> fin <span class="kw">in</span> data2:</span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">dir</span> <span class="op">=</span> <span class="st">&#39;asc&#39;</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>                    fin <span class="op">=</span> <span class="st">&#39;&#39;</span></span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">break</span></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>                <span class="co"># If we collect 0 runs we break immediately (happens when no runs in category)</span></span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span>(<span class="bu">len</span>(data2) <span class="op">==</span> <span class="dv">0</span>):</span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">break</span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>                offset <span class="op">+=</span> maxim</span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the dates from a string to a datetime object    </span></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> time_convert(x):</span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> pd.isna(x):</span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> np.nan</span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> datetime.strptime(x, <span class="st">&#39;%Y-%m-</span><span class="sc">%d</span><span class="st">&#39;</span>)</span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span>:</span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> datetime.strptime(x, <span class="st">&#39;%Y-%m-</span><span class="sc">%d</span><span class="st">&#39;</span>)</span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span>:</span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="bu">type</span>(x))</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;Date&#39;</span>] <span class="op">=</span> [time_convert(x) <span class="cf">for</span> x <span class="kw">in</span> df[<span class="st">&#39;Date&#39;</span>]]</span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<div class="output execute_result" data-execution_count="5">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Game</th>
      <th>Category</th>
      <th>Run Time</th>
      <th>Date</th>
      <th>Values</th>
      <th>Game ID</th>
      <th>Cat ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Bibi &amp; Tina: New Adventures With Horses</td>
      <td>Main Missions</td>
      <td>3531.0</td>
      <td>2022-04-21</td>
      <td>set()</td>
      <td>ldej22j1</td>
      <td>wdmm094d</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bibi &amp; Tina: New Adventures With Horses</td>
      <td>Main Missions</td>
      <td>3482.0</td>
      <td>2022-04-22</td>
      <td>set()</td>
      <td>ldej22j1</td>
      <td>wdmm094d</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Bibi &amp; Tina: New Adventures With Horses</td>
      <td>Main Missions</td>
      <td>3396.0</td>
      <td>2022-04-23</td>
      <td>set()</td>
      <td>ldej22j1</td>
      <td>wdmm094d</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Bibi &amp; Tina: New Adventures With Horses</td>
      <td>Main Missions</td>
      <td>3346.0</td>
      <td>2022-04-26</td>
      <td>set()</td>
      <td>ldej22j1</td>
      <td>wdmm094d</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Burger &amp; Frights</td>
      <td>Any%</td>
      <td>906.0</td>
      <td>2021-09-01</td>
      <td>set()</td>
      <td>3698y4ld</td>
      <td>zdnzx59d</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2580131</th>
      <td>暖雪 Warm Snow</td>
      <td>White Ash% NMG</td>
      <td>1045.0</td>
      <td>2022-04-19</td>
      <td>set()</td>
      <td>v1pxz946</td>
      <td>ndxnwvvk</td>
    </tr>
    <tr>
      <th>2580132</th>
      <td>暖雪 Warm Snow</td>
      <td>Fresh File% NMG</td>
      <td>2569.0</td>
      <td>2022-02-10</td>
      <td>set()</td>
      <td>v1pxz946</td>
      <td>vdoy5my2</td>
    </tr>
    <tr>
      <th>2580133</th>
      <td>暖雪 Warm Snow</td>
      <td>Fresh File% NMG</td>
      <td>2351.0</td>
      <td>2022-04-21</td>
      <td>set()</td>
      <td>v1pxz946</td>
      <td>vdoy5my2</td>
    </tr>
    <tr>
      <th>2580134</th>
      <td>暖雪 Warm Snow</td>
      <td>Fresh File% NMG</td>
      <td>1676.0</td>
      <td>2022-04-21</td>
      <td>set()</td>
      <td>v1pxz946</td>
      <td>vdoy5my2</td>
    </tr>
    <tr>
      <th>2580135</th>
      <td>鬼神童子ZENKI</td>
      <td>Any%</td>
      <td>1390.0</td>
      <td>2021-08-10</td>
      <td>set()</td>
      <td>9d387701</td>
      <td>5dw180ek</td>
    </tr>
  </tbody>
</table>
<p>2580136 rows × 7 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Do note how the Run Time column is in seconds. We've collected over 2.5 million runs! Now we want to convert the dates column from strings to datetime objects</p>
</div>
<div class="cell markdown">
<p>After collecting this data, I realized the genre of a game may be interesting for this analysis, and so we add that to our data as well.</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell markdown">
<p>I realized the current world record at the day the run was made could be important for an analysis, as it is commonly known that how challenging a world record is to achieve has a big impact in the motivation to break it, and thus possibly increase the number of runs.</p>
</div>
<section id="exploratory-data-analysis" class="cell markdown">
<h1>Exploratory Data Analysis</h1>
</section>
<div class="cell markdown">
<p>First, let's plot the number of speedruns that were uploaded approximately every month, for the runs which do have a date.</p>
</div>
<div class="cell code" data-execution_count="6">
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split range of dates in to approximately 1 month bins</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> <span class="bu">int</span>(<span class="bu">round</span>((<span class="bu">max</span>(df[<span class="st">&#39;Date&#39;</span>])<span class="op">-</span><span class="bu">min</span>(df[<span class="st">&#39;Date&#39;</span>]))<span class="op">/</span>timedelta(weeks <span class="op">=</span> <span class="fl">4.345</span>),<span class="dv">0</span>))</span></code></pre></div>
</div>
<div class="cell markdown">
<p>Note: There is one date in the set which appears wrong (stating it appears several decades before Speedrun.com existed), and so we will replace it with an interpolated date from the</p>
</div>
<div class="cell code" data-execution_count="7">
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bins)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>605
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>We see we have about 605 months worth of runs, now we can split the data between these months.</p>
</div>
<div class="cell code" data-execution_count="8">
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cut data into the bins based on submission date</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;Date_Cut&#39;</span>] <span class="op">=</span> pd.cut(df.Date, bins <span class="op">=</span> bins)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># We don&#39;t need to know full interval for graphing, take left endpoints</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> relabel(x):</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(x):</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> np.nan</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x.left</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&#39;Date_Cut&#39;</span>] <span class="op">=</span> [relabel(x) <span class="cf">for</span> x <span class="kw">in</span> df[<span class="st">&#39;Date_Cut&#39;</span>]]</span></code></pre></div>
</div>
<div class="cell markdown">
<p>Finally, we plotthe runs as a bar chart, with a bar for each month.</p>
</div>
<div class="cell code" data-execution_count="9">
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many runs fall in each of the cuts</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> df[<span class="st">&#39;Date_Cut&#39;</span>].value_counts()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> <span class="bu">dict</span>(counts)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these counts</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="op">*</span><span class="bu">zip</span>(<span class="op">*</span>counts.items()), width <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Speedrun.Com&#39;</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted&#39;</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/ce4cec2b255983cc1f6fa5404e4d1c4ef0d7fc27.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Wow! This graph has several things which jump out, such as how there are somehow runs which stretch back to the 70's. We can note though how there are virtually no runs visible at this scale until 2005 or so, so let's graph from there. Speedrun.com didn't exist until 2014, so let's consider runs which were submitted from the start of that year</p>
</div>
<div class="cell code" data-execution_count="139">
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset of more recent data</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>rec <span class="op">=</span> df[df[<span class="st">&#39;Date&#39;</span>]  <span class="op">&gt;=</span> <span class="st">&#39;01-01-14&#39;</span>]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many runs fall in each of the cuts</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>tot_counts <span class="op">=</span> rec[<span class="st">&#39;Date_Cut&#39;</span>].value_counts()</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>tot_counts <span class="op">=</span> <span class="bu">dict</span>(tot_counts)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these counts</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="op">*</span><span class="bu">zip</span>(<span class="op">*</span>tot_counts.items()), width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Speedrun.Com&#39;</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted&#39;</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/4f3273abebc505bfcaf86e69542138897c2c543c.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>We see a rather large spike in 2020, that increases so rapidly it could be exponential. We can test this theory with a graph with a logarithmic y-axis:</p>
</div>
<div class="cell code" data-execution_count="179">
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="op">*</span><span class="bu">zip</span>(<span class="op">*</span>tot_counts.items()), width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Speedrun.Com&#39;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>plt.yscale(<span class="st">&#39;log&#39;</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted (log scale)&#39;</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/3194875d36f781125b56e19b1331d7c99d44c43d.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Look at that! We can see a nearly linear relationship with this scale, suggesting the number of runs submitted to Speedrun.com is approximately exponential. Let's do the same thing with Minecraft</p>
</div>
<div class="cell markdown">
<p>At this scale, we can see an explosion in the speedrunning scene as a whole, starting gradually from 2014, slowing around 2018, before a huge and sustained spike in submitted speedruns in 2020. We can also see if this matches for Minecraft as well.</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell code" data-execution_count="142">
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All runs with game ID associated with Minecraft: JE</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>mine <span class="op">=</span> rec[rec[<span class="st">&#39;Game ID&#39;</span>] <span class="op">==</span> <span class="st">&#39;j1npme6p&#39;</span>]</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Count how many runs fall in each of the cuts</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> mine[<span class="st">&#39;Date_Cut&#39;</span>].value_counts()</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> <span class="bu">dict</span>(counts)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these counts</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="op">*</span><span class="bu">zip</span>(<span class="op">*</span>counts.items()), width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Minecraft Leaderboards&#39;</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted&#39;</span>)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="op">*</span><span class="bu">zip</span>(<span class="op">*</span>counts.items()), width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Minecraft Leaderboards&#39;</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>plt.yscale(<span class="st">&#39;log&#39;</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted&#39;</span>)</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/49e730d82ab1175b2a5804626668dd4f1e8f5bbd.png" /></p>
</div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/5bd7b2c8ae265a3c70c7e9ca1973d24250b6bad5.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>Here we can see why people believed Minecraft speedrunning really took off after quarantine began. We see a modest number of runs continuously submitted up until 2019, then a gradual growth through 2020, then an explosion going into 2021. However the log graph shows the key differences between Minecraft and the Speedrun.com as a whole. While we could draw a general linear trend from 2013 to 2020, it appears to be quite weak. More importantly, we see a huge spike starting in 2020 and going into 2021, even on the log graph. This suggests that Minecraft surged in popularity exceedingly much, compared to its earlier years. Further, we see a sharp decline starting in 2021 and leading into 2022. These last two features differ drastically from the results in the overall Speedrun.com. This suggests that Minecraft's speedrunning popularity is different from the site as a whole, and we can show this quantitatively with linear regressions.</p>
</div>
<section id="linear-regression" class="cell markdown">
<h1>Linear Regression</h1>
</section>
<div class="cell markdown">
<p>We can use a linear regression to make an exponential fit of the Speedrun.com data by taking the log of the number of runs per month, then fitting a linear regression with respect to time. First, let's copy the data we want: the months and the number of runs in those months</p>
</div>
<div class="cell code" data-execution_count="143">
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tot_freq <span class="op">=</span> pd.DataFrame.from_dict([<span class="bu">dict</span>(tot_counts)]).melt()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>tot_freq.rename(columns <span class="op">=</span> {<span class="st">&#39;variable&#39;</span>: <span class="st">&#39;Month&#39;</span>, <span class="st">&#39;value&#39;</span>: <span class="st">&#39;Count&#39;</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Take log</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>log_count <span class="op">=</span> {k: math.log(v) <span class="cf">for</span> k, v <span class="kw">in</span> counts.items()}</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#log_count = counts.apply(lambda x: math.log(x))</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>tot_freq[<span class="st">&quot;Count&quot;</span>] <span class="op">=</span> tot_freq[<span class="st">&#39;Count&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: math.log10(x))</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Change how time is represented as datetime objects don&#39;t fit well with statsmodels</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>copy <span class="op">=</span> tot_freq[<span class="st">&#39;Month&#39;</span>].copy()</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>tot_freq[<span class="st">&#39;Month&#39;</span>]<span class="op">=</span>mdates.date2num(tot_freq[<span class="st">&#39;Month&#39;</span>])</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> tot_freq[<span class="st">&#39;Month&#39;</span>]</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>mod <span class="op">=</span> sm.OLS(tot_freq[<span class="st">&#39;Count&#39;</span>], X)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> mod.fit()</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="144">
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>res.params</span></code></pre></div>
<div class="output execute_result" data-execution_count="144">
<pre><code>const   -5.562301
Month    0.000554
dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="145">
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>res.summary2().tables[<span class="dv">1</span>][<span class="st">&#39;P&gt;|t|&#39;</span>]</span></code></pre></div>
<div class="output execute_result" data-execution_count="145">
<pre><code>const    7.883564e-34
Month    2.025207e-54
Name: P&gt;|t|, dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="146">
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>tot_freq[<span class="st">&#39;res&#39;</span>] <span class="op">=</span> res.resid</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>tot_freq[<span class="st">&#39;fit&#39;</span>] <span class="op">=</span> res.fittedvalues</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>tot_freq[<span class="st">&#39;Month&#39;</span>] <span class="op">=</span> copy</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>tot_freq <span class="op">=</span> tot_freq.sort_values(by <span class="op">=</span> <span class="st">&#39;Month&#39;</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>ax.bar(tot_freq[<span class="st">&#39;Month&#39;</span>], tot_freq[<span class="st">&#39;Count&#39;</span>], width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Speedrun.com&#39;</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted (log$_</span><span class="sc">{10}</span><span class="st">$)&#39;</span>)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> plt.twinx()</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>ax2.set_ylim(ax.get_ylim())</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>ax2.plot(tot_freq[<span class="st">&#39;Month&#39;</span>], tot_freq[<span class="st">&#39;fit&#39;</span>], color<span class="op">=</span><span class="st">&#39;r&#39;</span>, label<span class="op">=</span><span class="st">&#39;Regression&#39;</span>)</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/a37a3ae5a296f55a7359250fde8d85e01335307a.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="147">
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>res.rsquared</span></code></pre></div>
<div class="output execute_result" data-execution_count="147">
<pre><code>0.913492334019323</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="148">
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>res.mse_resid</span></code></pre></div>
<div class="output execute_result" data-execution_count="148">
<pre><code>0.023263681546275207</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="149">
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>res.mse_model</span></code></pre></div>
<div class="output execute_result" data-execution_count="149">
<pre><code>24.320021315512843</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="150">
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>res.ssr</span></code></pre></div>
<div class="output execute_result" data-execution_count="150">
<pre><code>2.3031044730812456</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="151">
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>freq <span class="op">=</span> pd.DataFrame.from_dict([<span class="bu">dict</span>(counts)]).melt()</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>freq.rename(columns <span class="op">=</span> {<span class="st">&#39;variable&#39;</span>: <span class="st">&#39;Month&#39;</span>, <span class="st">&#39;value&#39;</span>: <span class="st">&#39;Count&#39;</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Take log</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>log_count <span class="op">=</span> {k: math.log(v) <span class="cf">for</span> k, v <span class="kw">in</span> counts.items()}</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#log_count = counts.apply(lambda x: math.log(x))</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&quot;Count&quot;</span>] <span class="op">=</span> freq[<span class="st">&#39;Count&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: math.log10(x))</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Change how time is represented as datetime objects don&#39;t fit well with statsmodels</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>copy <span class="op">=</span> freq[<span class="st">&#39;Month&#39;</span>].copy()</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Month&#39;</span>]<span class="op">=</span>mdates.date2num(freq[<span class="st">&#39;Month&#39;</span>])</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> freq[<span class="st">&#39;Month&#39;</span>]</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> sm.add_constant(X)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>mod <span class="op">=</span> sm.OLS(freq[<span class="st">&#39;Count&#39;</span>], X)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> mod.fit()</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="154">
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>res.params</span></code></pre></div>
<div class="output execute_result" data-execution_count="154">
<pre><code>const   -13.530621
Month     0.000842
dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="152">
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;res&#39;</span>] <span class="op">=</span> res.resid</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;fit&#39;</span>] <span class="op">=</span> res.fittedvalues</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Month&#39;</span>] <span class="op">=</span> copy</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>freq <span class="op">=</span> freq.sort_values(by <span class="op">=</span> <span class="st">&#39;Month&#39;</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Runs Submitted to Minecraft Leaderboards&#39;</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Date Submitted&#39;</span>)</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Number of runs submitted (log$_</span><span class="sc">{10}</span><span class="st">$)&#39;</span>)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>ax.bar(freq[<span class="st">&#39;Month&#39;</span>], freq[<span class="st">&#39;Count&#39;</span>], width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> plt.twinx()</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>ax2.set_ylim(ax.get_ylim())</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>ax2.plot(freq[<span class="st">&#39;Month&#39;</span>], freq[<span class="st">&#39;fit&#39;</span>], color<span class="op">=</span><span class="st">&#39;r&#39;</span>, label<span class="op">=</span><span class="st">&#39;Regression&#39;</span>)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/6411276ae6773a00ed6e3efcb5896b13a66d7923.png" /></p>
</div>
</div>
<div class="cell markdown">
<p>We see it roughly follows the data, let's look at the p-values:</p>
</div>
<div class="cell code" data-execution_count="155">
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>res.summary2().tables[<span class="dv">1</span>][<span class="st">&#39;P&gt;|t|&#39;</span>]</span></code></pre></div>
<div class="output execute_result" data-execution_count="155">
<pre><code>const    8.032060e-21
Month    3.208438e-23
Name: P&gt;|t|, dtype: float64</code></pre>
</div>
</div>
<div class="cell markdown">
<p>These are miniscule, showing there is certainly a relationship between number of speedruns and time. However these values are quite different than those of the overall speedrunning community (STANDARDIZE BOTH AND COMPARE) so there must be something about minecraft affecting its results</p>
</div>
<div class="cell code" data-execution_count="156">
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>res.mse_model</span></code></pre></div>
<div class="output execute_result" data-execution_count="156">
<pre><code>53.560719204703645</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="157">
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>res.rsquared</span></code></pre></div>
<div class="output execute_result" data-execution_count="157">
<pre><code>0.6472904994983575</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="158">
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>res.ssr</span></code></pre></div>
<div class="output execute_result" data-execution_count="158">
<pre><code>29.185310972183814</code></pre>
</div>
</div>
<div class="cell markdown">
<p>There must be another variable involved that explains Minecraft's surge and decline in runs. While quarantine obviously played a part, I suggest another variable which boosted Minecraft only until its peak: Dream. To summarize, Dream is a very popular Minecraft Youtuber who, from 2019 through 2020, was Minecraft's most popular speedrunner. However, in December of 2020 it was found that <a href="https://mcspeedrun.com/dream.pdf">Dream had cheated</a> on his speedruns leading to him publically disavowing the community on Speedrun.com. We can notice how close December 2020 is to the peak we see of Minecraft speedrunning, so perhaps this could be an explantory variable.</p>
</div>
<div class="cell markdown">
<p>Dream uploaded his <a href="https://www.youtube.com/watch?v=CFkv6DtKf3w">first world record</a> on March 16, 2020, and the proof of his cheating were published on December 11, 2020. Thus we can consider time between these two to be "peak dream influence." We can add whether a month occured between these two dates to our model.</p>
</div>
<div class="cell code" data-execution_count="159">
<div class="sourceCode" id="cb44"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Month&#39;</span>]<span class="op">=</span>mdates.date2num(freq[<span class="st">&#39;Month&#39;</span>])</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> mdates.datestr2num(<span class="st">&#39;03/16/2020&#39;</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">#mdates.date2num(freq[&#39;Month&#39;]) &#39;Mar 16, 2020&#39;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>end <span class="op">=</span> mdates.datestr2num(<span class="st">&#39;12/11/2020&#39;</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Dream&#39;</span>] <span class="op">=</span> freq[<span class="st">&#39;Month&#39;</span>].between(start,end)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Dream&#39;</span>] <span class="op">=</span> freq[<span class="st">&#39;Dream&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="dv">1</span> <span class="cf">if</span> x <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>freq.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="159">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>Count</th>
      <th>res</th>
      <th>fit</th>
      <th>Dream</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>94</th>
      <td>16078.661157</td>
      <td>0.000000</td>
      <td>-0.006438</td>
      <td>0.006438</td>
      <td>0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>16109.054545</td>
      <td>0.477121</td>
      <td>0.445095</td>
      <td>0.032027</td>
      <td>0</td>
    </tr>
    <tr>
      <th>90</th>
      <td>16139.447934</td>
      <td>0.301030</td>
      <td>0.243414</td>
      <td>0.057616</td>
      <td>0</td>
    </tr>
    <tr>
      <th>96</th>
      <td>16169.841322</td>
      <td>0.000000</td>
      <td>-0.083205</td>
      <td>0.083205</td>
      <td>0</td>
    </tr>
    <tr>
      <th>80</th>
      <td>16200.234711</td>
      <td>0.477121</td>
      <td>0.368327</td>
      <td>0.108794</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>We want to add an interaction term, as we are suggesting that the growth of speedrunning with respect to time changed when dream was popular.</p>
</div>
<div class="cell code" data-execution_count="160">
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>y,X <span class="op">=</span> dmatrices(<span class="st">&#39;Count ~ Month*Dream&#39;</span>,freq, return_type <span class="op">=</span> <span class="st">&#39;dataframe&#39;</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.ravel(y)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>X.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="160">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Intercept</th>
      <th>Month</th>
      <th>Dream</th>
      <th>Month:Dream</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>94</th>
      <td>1.0</td>
      <td>16078.661157</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>1.0</td>
      <td>16109.054545</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>90</th>
      <td>1.0</td>
      <td>16139.447934</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>96</th>
      <td>1.0</td>
      <td>16169.841322</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>80</th>
      <td>1.0</td>
      <td>16200.234711</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we fit the model</p>
</div>
<div class="cell code" data-execution_count="161">
<div class="sourceCode" id="cb46"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>mod <span class="op">=</span> sm.OLS(y,X)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>fit <span class="op">=</span> mod.fit()</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="162">
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>fit.params</span></code></pre></div>
<div class="output execute_result" data-execution_count="162">
<pre><code>Intercept     -12.196165
Month           0.000762
Dream         -35.893774
Month:Dream     0.001983
dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="166">
<div class="sourceCode" id="cb49"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;res&#39;</span>] <span class="op">=</span> fit.resid</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;fit&#39;</span>] <span class="op">=</span> fit.fittedvalues</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Month&#39;</span>] <span class="op">=</span> copy</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>freq <span class="op">=</span> freq.sort_values(by <span class="op">=</span> <span class="st">&#39;Month&#39;</span>)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>ax.bar(freq[<span class="st">&#39;Month&#39;</span>], freq[<span class="st">&#39;Count&#39;</span>], width <span class="op">=</span> <span class="dv">31</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> plt.twinx()</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>ax2.set_ylim(ax.get_ylim())</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>ax2.plot(freq[<span class="st">&#39;Month&#39;</span>], freq[<span class="st">&#39;fit&#39;</span>], color<span class="op">=</span><span class="st">&#39;k&#39;</span>, label<span class="op">=</span><span class="st">&#39;Regression&#39;</span>)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/ba27d3a2d35dfa2a0b9a4520d64a2e2ce01a2d63.png" /></p>
</div>
</div>
<div class="cell code" data-execution_count="167">
<div class="sourceCode" id="cb50"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>fit.summary2().tables[<span class="dv">1</span>][<span class="st">&#39;P&gt;|t|&#39;</span>]</span></code></pre></div>
<div class="output execute_result" data-execution_count="167">
<pre><code>Intercept      1.069543e-18
Month          6.716696e-21
Dream          3.788544e-01
Month:Dream    3.690292e-01
Name: P&gt;|t|, dtype: float64</code></pre>
</div>
</div>
<div class="cell markdown">
<p>These p-values suggest the dream sweetspot is significant! but what if we also added the 5 month period before Dream admitted to cheating?This is the period after he was caught cheating, before he <a href="https://www.looper.com/432321/dreams-minecraft-speedrun-cheating-scandal-explained/">admitted to it</a> on May 30, 2021.</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb52"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell markdown">
<p>Let's also plot the residuals</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb53"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell code" data-execution_count="169">
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#We see</span></span></code></pre></div>
</div>
<div class="cell code" data-execution_count="170">
<div class="sourceCode" id="cb55"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Month&#39;</span>]<span class="op">=</span>mdates.date2num(freq[<span class="st">&#39;Month&#39;</span>])</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>very_end <span class="op">=</span> mdates.datestr2num(<span class="st">&#39;05/30/2021&#39;</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Cheat&#39;</span>] <span class="op">=</span> freq[<span class="st">&#39;Month&#39;</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="dv">1</span> <span class="cf">if</span> x <span class="op">&gt;</span> end <span class="cf">else</span> <span class="dv">0</span>)</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co">#freq[&#39;Cheat&#39;] = freq[&#39;Cheat&#39;].apply(lambda x: 1 if x else 0)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>freq.head()</span></code></pre></div>
<div class="output execute_result" data-execution_count="170">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>Count</th>
      <th>res</th>
      <th>fit</th>
      <th>Dream</th>
      <th>Cheat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>94</th>
      <td>16078.661157</td>
      <td>0.000000</td>
      <td>-0.058446</td>
      <td>0.058446</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>16109.054545</td>
      <td>0.477121</td>
      <td>0.395511</td>
      <td>0.081610</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>90</th>
      <td>16139.447934</td>
      <td>0.301030</td>
      <td>0.196255</td>
      <td>0.104775</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>96</th>
      <td>16169.841322</td>
      <td>0.000000</td>
      <td>-0.127940</td>
      <td>0.127940</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>80</th>
      <td>16200.234711</td>
      <td>0.477121</td>
      <td>0.326016</td>
      <td>0.151105</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell code" data-execution_count="171">
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>y,X <span class="op">=</span> dmatrices(<span class="st">&#39;Count ~ Month*Dream + Month*Cheat&#39;</span>,freq, return_type <span class="op">=</span> <span class="st">&#39;dataframe&#39;</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.ravel(y)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>mod <span class="op">=</span> sm.OLS(y,X)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>fit <span class="op">=</span> mod.fit()</span></code></pre></div>
</div>
<div class="cell code" data-execution_count="172">
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>fit.params</span></code></pre></div>
<div class="output execute_result" data-execution_count="172">
<pre><code>Intercept      -6.464687
Month           0.000423
Dream         -41.625253
Month:Dream     0.002322
Cheat          61.912920
Month:Cheat    -0.003224
dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="173">
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>fit.summary2().tables[<span class="dv">1</span>][<span class="st">&#39;P&gt;|t|&#39;</span>]</span></code></pre></div>
<div class="output execute_result" data-execution_count="173">
<pre><code>Intercept      2.191631e-07
Month          9.302297e-09
Dream          1.660017e-01
Month:Dream    1.535356e-01
Cheat          5.530645e-06
Month:Cheat    7.928875e-06
Name: P&gt;|t|, dtype: float64</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="174">
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;res&#39;</span>] <span class="op">=</span> fit.resid</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;fit&#39;</span>] <span class="op">=</span> fit.fittedvalues</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;Month&#39;</span>] <span class="op">=</span> copy</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>freq <span class="op">=</span> freq.sort_values(by <span class="op">=</span> <span class="st">&#39;Month&#39;</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>ax.bar(freq[<span class="st">&#39;Month&#39;</span>], freq[<span class="st">&#39;Count&#39;</span>], width <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> plt.twinx()</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>ax2.set_ylim(ax.get_ylim())</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>ax2.plot(freq[<span class="st">&#39;Month&#39;</span>], freq[<span class="st">&#39;fit&#39;</span>], color<span class="op">=</span><span class="st">&#39;k&#39;</span>, label<span class="op">=</span><span class="st">&#39;Regression&#39;</span>)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/a1a65abd12308f0b7d4ee875055030eccbc62ccd.png" /></p>
</div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb62"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell code" data-execution_count="36">
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>freq</span></code></pre></div>
<div class="output execute_result" data-execution_count="36">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>Count</th>
      <th>res</th>
      <th>fit</th>
      <th>Dream</th>
      <th>Cheat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>2013-02-08 08:00:47.603305728</td>
      <td>1.098612</td>
      <td>0.629268</td>
      <td>0.469344</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>83</th>
      <td>2013-03-10 17:27:16.363636480</td>
      <td>1.098612</td>
      <td>0.599834</td>
      <td>0.498778</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>88</th>
      <td>2013-04-10 02:53:45.123966976</td>
      <td>0.693147</td>
      <td>0.164936</td>
      <td>0.528211</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>2013-05-10 12:20:13.884297472</td>
      <td>1.098612</td>
      <td>0.540967</td>
      <td>0.557645</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>103</th>
      <td>2013-06-09 21:46:42.644627968</td>
      <td>0.000000</td>
      <td>-0.587078</td>
      <td>0.587078</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2021-12-05 00:47:36.198347008</td>
      <td>6.049733</td>
      <td>0.669827</td>
      <td>5.379907</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2022-01-04 10:14:04.958677760</td>
      <td>5.973810</td>
      <td>0.789882</td>
      <td>5.183928</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2022-02-03 19:40:33.719008256</td>
      <td>5.129899</td>
      <td>0.141950</td>
      <td>4.987949</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>31</th>
      <td>2022-03-06 05:07:02.479338752</td>
      <td>3.688879</td>
      <td>-1.103091</td>
      <td>4.791970</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>30</th>
      <td>2022-04-05 14:33:31.239669504</td>
      <td>3.688879</td>
      <td>-0.907112</td>
      <td>4.595991</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>105 rows × 6 columns</p>
</div>
</div>
</div>
<div class="cell code" data-execution_count="37">
<div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>copy</span></code></pre></div>
<div class="output execute_result" data-execution_count="37">
<pre><code>0     2021-02-04 02:22:48.595041280
1     2021-03-06 11:49:17.355371776
2     2021-01-04 16:56:19.834710784
3     2021-04-05 21:15:46.115702528
4     2021-05-06 06:42:14.876033024
                   ...             
100   2015-12-08 17:01:05.454545408
101   2016-03-08 21:20:31.735537152
102   2014-04-09 20:11:30.247933952
103   2013-06-09 21:46:42.644627968
104   2013-12-09 06:25:35.206611456
Name: Month, Length: 105, dtype: datetime64[ns]</code></pre>
</div>
</div>
<div class="cell code" data-execution_count="38">
<div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>freq[<span class="st">&#39;res&#39;</span>] <span class="op">=</span> fit.resid</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>ax.bar(copy, freq[<span class="st">&#39;res&#39;</span>], width <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img src="vertopal_5f53cfe86e214d7485dc18f4314651ca/463d2c19f663d6216ae62fd17646b5595cf9ac14.png" /></p>
</div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="cell code" data-execution_count="39">
<div class="sourceCode" id="cb68"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>freq</span></code></pre></div>
<div class="output execute_result" data-execution_count="39">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>Count</th>
      <th>res</th>
      <th>fit</th>
      <th>Dream</th>
      <th>Cheat</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>78</th>
      <td>2013-02-08 08:00:47.603305728</td>
      <td>1.098612</td>
      <td>0.629268</td>
      <td>0.469344</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>83</th>
      <td>2013-03-10 17:27:16.363636480</td>
      <td>1.098612</td>
      <td>0.599834</td>
      <td>0.498778</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>88</th>
      <td>2013-04-10 02:53:45.123966976</td>
      <td>0.693147</td>
      <td>0.164936</td>
      <td>0.528211</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>76</th>
      <td>2013-05-10 12:20:13.884297472</td>
      <td>1.098612</td>
      <td>0.540967</td>
      <td>0.557645</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>103</th>
      <td>2013-06-09 21:46:42.644627968</td>
      <td>0.000000</td>
      <td>-0.587078</td>
      <td>0.587078</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2021-12-05 00:47:36.198347008</td>
      <td>6.049733</td>
      <td>0.669827</td>
      <td>5.379907</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>16</th>
      <td>2022-01-04 10:14:04.958677760</td>
      <td>5.973810</td>
      <td>0.789882</td>
      <td>5.183928</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>21</th>
      <td>2022-02-03 19:40:33.719008256</td>
      <td>5.129899</td>
      <td>0.141950</td>
      <td>4.987949</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>31</th>
      <td>2022-03-06 05:07:02.479338752</td>
      <td>3.688879</td>
      <td>-1.103091</td>
      <td>4.791970</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>30</th>
      <td>2022-04-05 14:33:31.239669504</td>
      <td>3.688879</td>
      <td>-0.907112</td>
      <td>4.595991</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>105 rows × 6 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>However, unlike the general trend we saw before, Minecraft exceeded in popularity, even on the logarithmic scale. Weirder, we see a steep dropoff starting in 2021. This suggests Minecraft's speedrunning popularity may be different to the overall speedrunning scene. Let's investigate with a linear model.</p>
</div>
<div class="cell markdown">
<p>So we see time plays an important factor here, but to what extent? Well, let's attempt a linear regression. Let's first begin with Minecraft, and can generalize for all the other games later. These are the variables I will immediately consider: the date submitted, the category, the variables (aka the subcategory), and if the date is after March 1, 2020 (meaning the runner would likely be living in quarantine and/or a pandemic).</p>
</div>
</body>
</html>
